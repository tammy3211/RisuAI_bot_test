<script lang="ts">
  interface Props {
    testInput: string;
    testOutput: string;
    testMode: string;
    executionTime: number | null;
    onApply: () => void;
  }

  let { 
    testInput = $bindable(), 
    testOutput, 
    testMode = $bindable(),
    executionTime,
    onApply 
  }: Props = $props();
</script>

<div class="rounded-xl bg-gray-100 p-6 shadow-sm">
  <div class="mb-5 flex items-center justify-between border-b-2 border-slate-200 pb-2.5">
    <div class="text-lg font-semibold text-slate-600">í…ŒìŠ¤íŠ¸ (RisuAI processScript ì‚¬ìš©)</div>
    {#if executionTime !== null}
      <div class="rounded-lg border-2 px-3 py-1.5 text-sm font-bold shadow-sm {executionTime > 10 ? 'border-red-400 bg-red-50 text-red-700' : 'border-emerald-400 bg-emerald-50 text-emerald-700'}">
        {(executionTime * 1000).toFixed(2)} ms
      </div>
    {/if}
  </div>

  <div class="mb-4">
    <label for="test-mode" class="mb-2 block text-sm font-semibold text-slate-600">í…ŒìŠ¤íŠ¸ ëª¨ë“œ:</label>
    <select
      id="test-mode"
      class="w-full rounded-md border-2 border-slate-200 px-3 py-2.5 font-semibold transition focus:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-200"
      bind:value={testMode}
    >
      <option value="editinput">ğŸ“¥ EditInput (ì…ë ¥ ì „ì²˜ë¦¬)</option>
      <option value="editoutput">ğŸ“¤ EditOutput (ì¶œë ¥ í›„ì²˜ë¦¬)</option>
      <option value="editprocess">âš™ï¸ EditProcess (í”„ë¡œì„¸ìŠ¤ ì²˜ë¦¬)</option>
      <option value="editdisplay">ğŸ–¥ï¸ EditDisplay (ë””ìŠ¤í”Œë ˆì´ ì²˜ë¦¬)</option>
    </select>
  </div>

  <div class="mb-4">
    <label for="test-input" class="mb-2 block text-sm font-semibold text-slate-600">ì…ë ¥ í…ìŠ¤íŠ¸:</label>
    <textarea 
      id="test-input"
      class="min-h-[120px] w-full resize-y rounded-md border-2 border-slate-200 px-3 py-3 font-mono text-sm leading-relaxed transition focus:border-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-200"
      bind:value={testInput}
      placeholder="í…ŒìŠ¤íŠ¸í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."
    ></textarea>
  </div>

  <button
    class="mb-4 w-full rounded-md bg-emerald-500 px-4 py-3 text-sm font-semibold text-white shadow transition hover:-translate-y-0.5 hover:bg-emerald-600 hover:shadow-lg"
    onclick={onApply}
  >
    â–¶ Regex ì ìš© ({testMode})
  </button>

  <div>
    <label for="test-output" class="mb-2 block text-sm font-semibold text-slate-600">ì¶œë ¥ ê²°ê³¼:</label>
    <textarea 
      id="test-output"
      class="min-h-[120px] w-full resize-y rounded-md border-2 border-slate-200 bg-slate-100 px-3 py-3 font-mono text-sm leading-relaxed text-slate-700"
      value={testOutput}
      readonly
      placeholder="ì ìš© ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤..."
    ></textarea>
  </div>
</div>
